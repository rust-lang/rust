#[prelude_import]
use ::std::prelude::rust_2015::*;
#[macro_use]
extern crate std;
//@ compile-flags: -Zunpretty=hir -Zflatten-format-args=yes
//@ check-pass

fn main() {
    let x = 1;
    // Should flatten to println!("a 123 b {x} xyz\n"):
    {
        ::std::io::_print(format_arguments::new(unsafe {
                    format_template::new(&[format_piece::num(8usize),
                                    format_piece::str("a 123 b "), format_piece::num(5usize),
                                    format_piece::str(" xyz\n"), format_piece::num(0usize)])
                }, &[format_argument::new_display(&x)]));
    };
}
