error: `extern` fn uses type `Bar`, which is not FFI-safe
  --> $DIR/lint-113436-1.rs:22:22
   |
LL | extern "C" fn bar(x: Bar) -> Bar {
   |                      ^^^ not FFI-safe
   |
   = note: this struct/enum/union (`Bar`) is FFI-unsafe due to a `NotSafe` field
note: the type is defined here
  --> $DIR/lint-113436-1.rs:16:1
   |
LL | pub struct Bar {
   | ^^^^^^^^^^^^^^
   = help: consider adding a `#[repr(C)]` (not `#[repr(C,packed)]`) or `#[repr(transparent)]` attribute to `NotSafe`
   = note: `NotSafe` has unspecified layout
note: the type is defined here
  --> $DIR/lint-113436-1.rs:13:1
   |
LL | struct NotSafe(u32);
   | ^^^^^^^^^^^^^^
note: the lint level is defined here
  --> $DIR/lint-113436-1.rs:1:9
   |
LL | #![deny(improper_c_fn_definitions)]
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^

error: `extern` fn uses type `Bar`, which is not FFI-safe
  --> $DIR/lint-113436-1.rs:22:30
   |
LL | extern "C" fn bar(x: Bar) -> Bar {
   |                              ^^^ not FFI-safe
   |
   = note: this struct/enum/union (`Bar`) is FFI-unsafe due to a `NotSafe` field
note: the type is defined here
  --> $DIR/lint-113436-1.rs:16:1
   |
LL | pub struct Bar {
   | ^^^^^^^^^^^^^^
   = help: consider adding a `#[repr(C)]` (not `#[repr(C,packed)]`) or `#[repr(transparent)]` attribute to `NotSafe`
   = note: `NotSafe` has unspecified layout
note: the type is defined here
  --> $DIR/lint-113436-1.rs:13:1
   |
LL | struct NotSafe(u32);
   | ^^^^^^^^^^^^^^

error: aborting due to 2 previous errors

