warning: lint `temporary_cstring_as_ptr` has been renamed to `dangling_pointers_from_temporaries`
  --> $DIR/cstring-as-ptr.rs:2:9
   |
LL | #![deny(temporary_cstring_as_ptr)]
   |         ^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `dangling_pointers_from_temporaries`
   |
   = note: `#[warn(renamed_and_removed_lints)]` on by default

error: this creates a dangling pointer because temporary `CString` is dropped at end of statement
  --> $DIR/cstring-as-ptr.rs:15:48
   |
LL |     let s = CString::new("some text").unwrap().as_ptr();
   |             ---------------------------------- ^^^^^^ pointer created here
   |             |
   |             this `CString` is dropped at end of statement
   |
   = help: bind the `CString` to a variable such that it outlives the pointer returned by `as_ptr`
   = note: a dangling pointer is safe, but dereferencing one is undefined behavior
   = note: returning a pointer to a local variable will always result in a dangling pointer
   = note: for more information, see <https://doc.rust-lang.org/reference/destructors.html>
note: the lint level is defined here
  --> $DIR/cstring-as-ptr.rs:2:9
   |
LL | #![deny(temporary_cstring_as_ptr)]
   |         ^^^^^^^^^^^^^^^^^^^^^^^^

error: this creates a dangling pointer because temporary `CString` is dropped at end of statement
  --> $DIR/cstring-as-ptr.rs:9:52
   |
LL |         let s = CString::new("some text").unwrap().as_ptr();
   |                 ---------------------------------- ^^^^^^ pointer created here
   |                 |
   |                 this `CString` is dropped at end of statement
...
LL |     mymacro!();
   |     ---------- in this macro invocation
   |
   = help: bind the `CString` to a variable such that it outlives the pointer returned by `as_ptr`
   = note: a dangling pointer is safe, but dereferencing one is undefined behavior
   = note: returning a pointer to a local variable will always result in a dangling pointer
   = note: for more information, see <https://doc.rust-lang.org/reference/destructors.html>
   = note: this error originates in the macro `mymacro` (in Nightly builds, run with -Z macro-backtrace for more info)

error: aborting due to 2 previous errors; 1 warning emitted

