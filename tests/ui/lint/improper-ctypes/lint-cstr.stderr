error: `extern` block uses type `CStr`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:7:21
   |
LL |     fn take_cstr(s: CStr);
   |                     ^^^^ not FFI-safe
   |
   = help: consider passing a `*const std::ffi::c_char` or `*mut std::ffi::c_char` instead,
           and use `CString::into_raw()` then `CString::from_raw()` or a dedicated buffer
           (note that `CString::into_raw()`'s output must not be `libc::free()`'d)
   = note: `CStr`/`CString` do not have a guaranteed layout
note: the lint level is defined here
  --> $DIR/lint-cstr.rs:2:9
   |
LL | #![deny(improper_ctypes, improper_c_fn_definitions, improper_c_callbacks)]
   |         ^^^^^^^^^^^^^^^

error: `extern` block uses type `&CStr`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:10:25
   |
LL |     fn take_cstr_ref(s: &CStr);
   |                         ^^^^^ not FFI-safe
   |
   = note: this reference to an unsized type contains metadata, which makes it incompatible with a C pointer
   = help: consider passing a `*const std::ffi::c_char` instead, and use `CStr::as_ptr()` or `CString::as_ptr()`
   = note: `CStr`/`CString` do not have a guaranteed layout

error: `extern` block uses type `CString`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:13:24
   |
LL |     fn take_cstring(s: CString);
   |                        ^^^^^^^ not FFI-safe
   |
   = help: consider passing a `*const std::ffi::c_char` or `*mut std::ffi::c_char` instead,
           and use `CString::into_raw()` then `CString::from_raw()` or a dedicated buffer
           (note that `CString::into_raw()`'s output must not be `libc::free()`'d)
   = note: `CStr`/`CString` do not have a guaranteed layout

error: `extern` block uses type `CString`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:16:28
   |
LL |     fn take_cstring_ref(s: &CString);
   |                            ^^^^^^^^ not FFI-safe
   |
   = help: consider passing a `*const std::ffi::c_char` instead, and use `CStr::as_ptr()` or `CString::as_ptr()`
   = note: `CStr`/`CString` do not have a guaranteed layout

error: `extern` block uses type `CString`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:20:32
   |
LL |     fn take_cstring_ptr_mut(s: *mut CString);
   |                                ^^^^^^^^^^^^ not FFI-safe
   |
   = help: consider passing a `*mut std::ffi::c_char` instead, and use `CString::into_raw()` then `CString::from_raw()` or a dedicated buffer
   = note: `CStr`/`CString` do not have a guaranteed layout

error: `extern` block uses type `CString`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:24:32
   |
LL |     fn take_cstring_ref_mut(s: &mut CString);
   |                                ^^^^^^^^^^^^ not FFI-safe
   |
   = help: consider passing a `*mut std::ffi::c_char` instead, and use `CString::into_raw()` then `CString::from_raw()` or a dedicated buffer
   = note: `CStr`/`CString` do not have a guaranteed layout

error: `extern` fn uses type `&CStr`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:29:37
   |
LL | extern "C" fn rust_take_cstr_ref(s: &CStr) {}
   |                                     ^^^^^ not FFI-safe
   |
   = note: this reference to an unsized type contains metadata, which makes it incompatible with a C pointer
   = help: consider passing a `*const std::ffi::c_char` instead, and use `CStr::as_ptr()` or `CString::as_ptr()`
   = note: `CStr`/`CString` do not have a guaranteed layout
note: the lint level is defined here
  --> $DIR/lint-cstr.rs:2:26
   |
LL | #![deny(improper_ctypes, improper_c_fn_definitions, improper_c_callbacks)]
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^

error: `extern` fn uses type `CString`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:32:36
   |
LL | extern "C" fn rust_take_cstring(s: CString) {}
   |                                    ^^^^^^^ not FFI-safe
   |
   = help: consider passing a `*const std::ffi::c_char` or `*mut std::ffi::c_char` instead,
           and use `CString::into_raw()` then `CString::from_raw()` or a dedicated buffer
           (note that `CString::into_raw()`'s output must not be `libc::free()`'d)
   = note: `CStr`/`CString` do not have a guaranteed layout

error: `extern` fn uses type `CString`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:35:44
   |
LL | extern "C" fn rust_take_cstring_ptr_mut(s: *mut CString) {}
   |                                            ^^^^^^^^^^^^ not FFI-safe
   |
   = help: consider passing a `*mut std::ffi::c_char` instead, and use `CString::into_raw()` then `CString::from_raw()` or a dedicated buffer
   = note: `CStr`/`CString` do not have a guaranteed layout

error: `extern` fn uses type `CString`, which is not FFI-safe
  --> $DIR/lint-cstr.rs:38:44
   |
LL | extern "C" fn rust_take_cstring_ref_mut(s: &mut CString) {}
   |                                            ^^^^^^^^^^^^ not FFI-safe
   |
   = help: consider passing a `*mut std::ffi::c_char` instead, and use `CString::into_raw()` then `CString::from_raw()` or a dedicated buffer
   = note: `CStr`/`CString` do not have a guaranteed layout

error: aborting due to 10 previous errors

